/* Graph visualization styles for Mahart Linked Notes */

@layer components {
  /* Graph container */
  .graph-container {
    @apply w-full h-full bg-card border border-border rounded-lg overflow-hidden relative;
  }
  
  .graph-svg {
    @apply w-full h-full;
  }
  
  /* Graph controls */
  .graph-controls {
    @apply absolute top-4 left-4 flex flex-col gap-2 z-10;
  }
  
  .graph-control-group {
    @apply flex items-center gap-2 bg-popover/90 backdrop-blur-sm border border-border rounded-md p-2;
  }
  
  .graph-control-button {
    @apply p-2 rounded hover:bg-accent hover:text-accent-foreground transition-colors;
  }
  
  .graph-control-button.active {
    @apply bg-accent text-accent-foreground;
  }
  
  /* Graph legend */
  .graph-legend {
    @apply absolute top-4 right-4 bg-popover/90 backdrop-blur-sm border border-border rounded-md p-3 z-10;
  }
  
  .legend-item {
    @apply flex items-center gap-2 text-sm;
  }
  
  .legend-color {
    @apply w-3 h-3 rounded-full;
  }
  
  /* Graph nodes */
  .graph-node {
    @apply cursor-pointer transition-all duration-200;
    stroke-width: 2;
    stroke: hsl(var(--border));
  }
  
  .graph-node:hover {
    stroke-width: 3;
    filter: brightness(1.2);
  }
  
  .graph-node.selected {
    stroke: hsl(var(--primary));
    stroke-width: 3;
  }
  
  .graph-node.highlighted {
    stroke: hsl(var(--accent));
    stroke-width: 3;
    filter: brightness(1.3);
  }
  
  /* Graph links */
  .graph-link {
    @apply transition-all duration-200;
    stroke: hsl(var(--muted-foreground));
    stroke-width: 1;
    opacity: 0.6;
  }
  
  .graph-link.highlighted {
    stroke: hsl(var(--accent));
    stroke-width: 2;
    opacity: 1;
  }
  
  .graph-link.tag-link {
    stroke: hsl(var(--primary));
    stroke-dasharray: 5,5;
  }
  
  .graph-link.color-link {
    stroke-width: 2;
  }
  
  /* Graph labels */
  .graph-label {
    @apply pointer-events-none select-none text-xs;
    fill: hsl(var(--foreground));
    text-anchor: middle;
    dominant-baseline: central;
  }
  
  .graph-label.node-label {
    @apply font-medium;
  }
  
  .graph-label.tag-label {
    @apply text-xs opacity-75;
  }
  
  /* Graph clusters */
  .graph-cluster {
    fill: hsl(var(--muted));
    stroke: hsl(var(--border));
    stroke-width: 1;
    opacity: 0.1;
  }
  
  /* Graph minimap */
  .graph-minimap {
    @apply absolute bottom-4 right-4 w-32 h-24 bg-popover/90 backdrop-blur-sm border border-border rounded-md overflow-hidden z-10;
  }
  
  .minimap-viewport {
    fill: hsl(var(--primary));
    opacity: 0.3;
    stroke: hsl(var(--primary));
    stroke-width: 1;
  }
  
  /* Graph statistics */
  .graph-stats {
    @apply absolute bottom-4 left-4 bg-popover/90 backdrop-blur-sm border border-border rounded-md p-3 z-10;
  }
  
  .graph-stat {
    @apply flex items-center justify-between gap-4 text-sm;
  }
  
  .graph-stat-label {
    @apply text-muted-foreground;
  }
  
  .graph-stat-value {
    @apply font-medium text-foreground;
  }
  
  /* Graph filters */
  .graph-filters {
    @apply absolute top-4 left-1/2 transform -translate-x-1/2 flex items-center gap-2 bg-popover/90 backdrop-blur-sm border border-border rounded-md p-2 z-10;
  }
  
  .graph-filter-button {
    @apply px-3 py-1 rounded text-sm font-medium transition-colors;
  }
  
  .graph-filter-button.active {
    @apply bg-primary text-primary-foreground;
  }
  
  .graph-filter-button:not(.active) {
    @apply text-muted-foreground hover:text-foreground hover:bg-accent;
  }
  
  /* Force simulation controls */
  .force-controls {
    @apply absolute bottom-4 left-1/2 transform -translate-x-1/2 bg-popover/90 backdrop-blur-sm border border-border rounded-md p-3 z-10;
  }
  
  .force-control {
    @apply flex items-center gap-3 mb-2 last:mb-0;
  }
  
  .force-control-label {
    @apply text-sm text-muted-foreground w-20;
  }
  
  .force-control-slider {
    @apply flex-1;
  }
  
  /* Graph search */
  .graph-search {
    @apply absolute top-16 left-4 w-64 z-10;
  }
  
  .graph-search-input {
    @apply input;
  }
  
  .graph-search-results {
    @apply mt-1 bg-popover border border-border rounded-md shadow-lg max-h-48 overflow-y-auto;
  }
  
  .graph-search-result {
    @apply px-3 py-2 text-sm cursor-pointer hover:bg-accent hover:text-accent-foreground;
  }
  
  .graph-search-result.selected {
    @apply bg-accent text-accent-foreground;
  }
  
  /* 3D Graph specific styles */
  .graph-3d-container {
    @apply relative w-full h-full;
  }
  
  .graph-3d-controls {
    @apply absolute top-4 left-4 flex flex-col gap-2 z-20;
  }
  
  .graph-3d-info {
    @apply absolute top-4 right-4 bg-popover/90 backdrop-blur-sm border border-border rounded-md p-3 z-20;
  }
  
  /* Timeline graph */
  .timeline-graph {
    @apply w-full h-64 bg-card border border-border rounded-lg p-4;
  }
  
  .timeline-axis {
    stroke: hsl(var(--border));
    stroke-width: 1;
  }
  
  .timeline-tick {
    stroke: hsl(var(--muted-foreground));
    stroke-width: 1;
  }
  
  .timeline-label {
    fill: hsl(var(--muted-foreground));
    font-size: 12px;
    text-anchor: middle;
  }
  
  .timeline-event {
    @apply cursor-pointer transition-all duration-200;
    fill: hsl(var(--primary));
  }
  
  .timeline-event:hover {
    filter: brightness(1.2);
  }
  
  /* Heatmap */
  .heatmap-container {
    @apply w-full bg-card border border-border rounded-lg p-4;
  }
  
  .heatmap-cell {
    @apply cursor-pointer transition-all duration-200;
    stroke: hsl(var(--background));
    stroke-width: 1;
  }
  
  .heatmap-cell:hover {
    stroke: hsl(var(--primary));
    stroke-width: 2;
  }
  
  .heatmap-legend {
    @apply flex items-center gap-2 mt-4;
  }
  
  .heatmap-legend-label {
    @apply text-sm text-muted-foreground;
  }
  
  .heatmap-legend-scale {
    @apply flex;
  }
  
  .heatmap-legend-item {
    @apply w-4 h-4 border border-border;
  }
  
  /* Graph animations */
  @keyframes nodeAppear {
    0% {
      opacity: 0;
      transform: scale(0);
    }
    100% {
      opacity: 1;
      transform: scale(1);
    }
  }
  
  @keyframes linkAppear {
    0% {
      opacity: 0;
      stroke-dasharray: 0,1000;
    }
    100% {
      opacity: 0.6;
      stroke-dasharray: 1000,0;
    }
  }
  
  .graph-node-enter {
    animation: nodeAppear 0.5s ease-out;
  }
  
  .graph-link-enter {
    animation: linkAppear 0.8s ease-out;
  }
  
  /* Responsive design */
  @media (max-width: 768px) {
    .graph-controls {
      @apply flex-row top-2 left-2;
    }
    
    .graph-legend {
      @apply top-2 right-2 p-2;
    }
    
    .graph-minimap {
      @apply w-24 h-16;
    }
    
    .graph-filters {
      @apply top-2 left-1/2 transform -translate-x-1/2;
    }
  }
}
